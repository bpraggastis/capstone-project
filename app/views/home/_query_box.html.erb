
<div id="query-box">
  <a href="#" class="auto-mark menu-item">Mark All Events</a>
  <a href="#" class="menu-item">|</a>
  <a href="#" class="clear-markers menu-item">Clear Markers</a>
  <a href="#" class="menu-item">|</a>
  <a href="#" class="menu-item" id="select-outbreak">Toggle Query Form</a>
  <a href="#" class="menu-item">|</a>
  <a href="/" class="menu-item">Reset Query</a>
  <a href="#" class="menu-item">|</a>
  <a class="menu-item" id="graph-trigger">See Graph</a>
  <% if @user %>
  <a href="#" class="menu-item">|</a>
  <a href="#" class="menu-item" data-toggle="collapse" data-target="#query-records">Saved Queries</a>
  <% end %>
</div>

<div class="collapse col-xs-12" id="query-records" >
  <% if @user.query_records.length > 0 %>
    <table class="table table-hover table-condensed col-sm-10 col-sm-1-offset">
      <tr>
        <th>Date of Query</th> <th>Outbreak</th> <th>Disease</th> <th>Location</th> <th>Start Date</th> <th>End Date</th>
      </tr>
      <% @user.query_records.each do |qr| %>
        <tr>
          <td> <%= qr.created_at.strftime("%b %d, %Y") %> </td>
          <td> <%= qr.outbreak_id %> </td>
          <td> <%= qr.disease_id %> </td>
          <td> <%= qr.place_id %> </td>
          <td> <%= qr.start_date.strftime("%m-%d-%Y") if qr.start_date %> </td>
          <td> <%= qr.end_date.strftime("%m-%d-%Y") if qr.end_date %> </td>
        </tr>
      <% end %>
    </table>
  <% else %>
    You have saved no query records.
  <% end %>
</div>

<div id="outbreak-query-box" class="query-form col-xs-12" >
  <%= form_tag query_path, method:"get", id: "query-form" do %>
  <ul>
    <li>
      <select id="outbreak-choices" name="outbreak_id">
        <option class="outbreak-selection" value="0" >Choose All Outbreaks</option>
        <% @outbreaks.each do |id| %>
          <option class="outbreak-selection" value="<%= id %>"> <%= Outbreak.find(id).title %> </option>
        <% end %>
      </select>
    </li>
    <li>
      <select id="disease-choices" name="disease_id">
        <option class="disease-option" value="0" >Choose All Medical Conditions</option>
        <% @diseases.each do |id| %>
          <option class="disease-option" value="<%= id %>" > <%= MedicalCondition.find(id).name %> </option>
        <% end %>
      </select>
    </li>
    <li>
      <select id="place-choices" name="place_id">
        <option class="place-selection" value="0" >Choose All States and Regions </option>
        <% @places.each do |id| %>
          <option class="place-selection" value="<%= id %>"> <%= Place.find(id).name %> </option>
        <% end %>
      </select>
    </li>
    <li>
      <input type="text" name="start_date" placeholder="Start Date ....."  id="startdatepicker">&nbspTo&nbsp
      <input type="text" name="end_date" placeholder="..... End Date" id="enddatepicker"></p>
    </li>
    <li>
      <%= submit_tag "Submit New Query", class: "btn btn-default" %>
    </li>
    <% end %>
    <% if @user %>
    <li>
      <a href="#" class="btn btn-default" id="save-query-record", data-url="/query_records">Save New Query Record</a>
    </li>
    <% end %>
    <% if session[:query_id] %>
    <li>
      <a href="#" class="btn btn-default" id="update-query-record", data-url= <%= "/query_records/#{session[:query_id]}" %> >Update Query Record</a>
    </li>
    <% end %>
  </ul>
</div>



<!-- <div id="query-choices">
  <ul id="list-of-choices" style="list-style-type:none; float: left">
    <li>Query Choices: </li>
    <li><%= @outbreaks.collect{|x| Outbreak.find(x).title} + @diseases.collect{|x| MedicalCondition.find(x).name} +
            @places.collect{|x| Place.find(x).name }%>&nbspBetween:&nbsp<%= @start_date.strftime("%b %d, %Y")%>&nbspand&nbsp
            <%= @end_date.strftime("%b %d, %Y")%></li>
  </ul>

</div> -->
